#set($widget = $UtilMethods.encodeURL($request.getParameter("widget")))

#if ($widget == "credo")
  #set($query = $UtilMethods.encodeURL($request.getParameter("query")))
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://www.credoreference.com/search.do?view=facet&query=$!query") 
#elseif ($widget == "digcol")
  #set($query = $UtilMethods.encodeURL($request.getParameter("CISOBOX1")))
  $response.sendRedirect("https://cdm2635-01.cdmhost.com/cdm/search/searchterm/$!query/order/nosort")
#elseif ($widget == "dm")
  #set($query = $UtilMethods.encodeURL($request.getParameter("searchText")))
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://advantage.marketline.com/Browse?q=$!query")

#elseif ($widget == "archon")
  #set($query = $UtilMethods.encodeURL($request.getParameter("qfa")))
  $response.sendRedirect("https://archon.shsu.edu/index.php?p=core%2Fsearch&content=1&q=$!query")

#elseif ($widget == "ebsco")
  #set($db = $UtilMethods.encodeURL($request.getParameter("db")))
  #set($query = $UtilMethods.encodeURL($request.getParameter("ebscohostsearchtext")))
  #if ($db == "brd")
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://search.ebscohost.com/login.aspx?direct=true&profile=ehost&scope=site&type=1&db=brd&db=brr&bquery=$!query")
  #elseif ($db == "h6a")
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://search.ebscohost.com/login.aspx?direct=true&profile=ehost&scope=site&type=1&db=h6a&db=h6b&bquery=$!query")
  #elseif ($db == "bft")
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://search.ebscohost.com/login.aspx?direct=true&profile=ehost&scope=site&type=1&db=bft&db=bpr&bquery=$!query")
  #elseif ($db == "egi")
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://search.ebscohost.com/login.aspx?direct=true&profile=ehost&scope=site&type=1&db=egi&db=egr&bquery=$!query")
  #elseif ($db == "geh")
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://search.ebscohost.com/login.aspx?direct=true&profile=ehost&scope=site&type=1&db=geh&db=guh&bquery=$!query")
  #elseif ($db == "rgm")
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://search.ebscohost.com/login.aspx?direct=true&profile=ehost&scope=site&type=1&db=rgm&db=rgr&bquery=$!query")
  #elseif ($db == "ssx")
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://search.ebscohost.com/login.aspx?direct=true&profile=ehost&scope=site&type=1&db=ssx&db=sxr&bquery=$!query")
#else
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://search.ebscohost.com/login.aspx?direct=true&profile=ehost&scope=site&type=1&db=$!db&bquery=$!query")
  #end

#elseif ($widget == "engineorange")
  #set($query = $UtilMethods.encodeURL($request.getParameter("ebscohostsearchtext")))
  #set($field = $UtilMethods.encodeURL($request.getParameter("searchFieldSelector")))
  #if ($field == "TI")
    $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://search.ebscohost.com/login.aspx?direct=true&site=eds&scope=site&type=1&bquery=TI+($!query)")
  #elseif ($field =="AU")
    $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://search.ebscohost.com/login.aspx?direct=true&site=eds&scope=site&type=1&bquery=AU+($!query)")
  #elseif ($field =="PUB")
    $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://search.ebscohost.com/login.aspx?direct=true&db=edspub&site=eds-live&scope=site&type=44&bquery=($!query)")
  #else
    $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://search.ebscohost.com/login.aspx?direct=true&site=eds&scope=site&type=1&bquery=$!query")
  #end
#elseif ($widget == "ficconn")
  #set($query = $UtilMethods.encodeURL($request.getParameter("q")))
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://www.fictionconnection.com/default.asp?c_over=1&q=$!query")
#elseif ($widget == "fod")
  #set($FilmsRado = $request.getParameter("FilmsRado"))
  #set($query = $UtilMethods.encodeURL($request.getParameter("txtSearchTermFilms")))
  #if ($FilmsRado == "Title")
    $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://digital.films.com/portalplaylists.aspx?aid=7381&a=a&q=$!query")
  #else
    $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://digital.films.com/portalplaylists.aspx?aid=7381&rd=lo&q=$!query")
  #end
#elseif ($widget == "journal")
  #set($query = $UtilMethods.encodeURL($request.getParameter("KW")))
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://search.ebscohost.com/login.aspx?direct=true&db=edspub&site=eds-live&scope=site&type=44&bquery=($!query)")
#elseif ($widget == "jstor")
  #set($query = $UtilMethods.encodeURL($request.getParameter("Query")))
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://www.jstor.org/action/doBasicSearch?Query=$!query&wc=on&acc=on")
#elseif ($widget == "oht")
  #set($query = $UtilMethods.encodeURL($request.getParameter("thesaurusTerm")))
  #set($searchType = $request.getParameter("searchType"))
  #set($type = $request.getParameter("type"))
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://www.oed.com/browsethesaurus?thesaurusTerm=$!query&searchType=$!searchType&type=$!type")
#elseif ($widget == "scholar")
  #set($query = $UtilMethods.encodeURL($request.getParameter("q")))
  #set($hl = $request.getParameter("hl"))
  #set($btnG = $request.getParameter("btnG"))

  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://scholar.google.com/scholar?hl=$!h1&q=$!query&btnG=$!btnG")
  #elseif ($widget == "singledigcol")
  #set($c = $UtilMethods.encodeURL($request.getParameter("collection")))
  #set($query = $UtilMethods.encodeURL($request.getParameter("searchterm")))

  $response.sendRedirect("https://cdm2635-01.cdmhost.com/cdm/search/collection/$!c/searchterm/$!query/field/all/mode/all/conn/and/order/nosort")
#elseif ($widget == "wos")
  #set($query = $UtilMethods.encodeURL($request.getParameter("topic")))
  #set($DestApp = $request.getParameter("DestApp"))
  $response.sendRedirect("https://ezproxy.shsu.edu/login?url=https://gateway.webofknowledge.com/gateway/Gateway.cgi?GWVersion=2&SrcApp=WEB&SrcAuth=HSB&DestApp=$!DestApp&DestLinkType=GeneralSearchSummary&topic=$!query")
#end
